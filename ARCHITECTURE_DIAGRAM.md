# ğŸ—ï¸ Diagrama da Arquitetura - Move/BattleMove + 5 Fases

## Arquitetura Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BATTLE SYSTEM                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Battle Class   â”‚
                    â”‚  (battle_env)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚         â”‚
                   teams â”‚         â”‚ field
                         â–¼         â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ BattlePokemonâ”‚    â”‚    Field     â”‚
          â”‚    (list)    â”‚    â”‚  (slot_pkm)  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         battle_moves: list[BattleMove]
                  â”‚
                  â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  BattleMove  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    Move      â”‚
          â”‚  (dinÃ¢mico)  â”‚         â”‚  (estÃ¡tico)  â”‚
          â”‚              â”‚         â”‚              â”‚
          â”‚ â”œâ”€ move      â”‚         â”‚ â”œâ”€ name      â”‚
          â”‚ â”œâ”€ pp_remain â”‚         â”‚ â”œâ”€ power     â”‚
          â”‚ â””â”€ execute() â”‚         â”‚ â”œâ”€ type      â”‚
          â”‚              â”‚         â”‚ â”œâ”€ priority  â”‚
          â”‚  Methods:    â”‚         â”‚ â””â”€ pp (max)  â”‚
          â”‚ â”œâ”€ consume_  â”‚         â”‚              â”‚
          â”‚   pp()       â”‚         â”‚              â”‚
          â”‚ â”œâ”€ restore_  â”‚         â”‚              â”‚
          â”‚   pp()       â”‚         â”‚              â”‚
          â”‚ â””â”€ reset_pp()â”‚         â”‚              â”‚
          â”‚              â”‚         â”‚              â”‚
          â”‚  Execution:  â”‚         â”‚              â”‚
          â”‚ â”œâ”€ _check_   â”‚         â”‚              â”‚
          â”‚   accuracy() â”‚         â”‚              â”‚
          â”‚ â”œâ”€ _calc_    â”‚         â”‚              â”‚
          â”‚   damage()   â”‚         â”‚              â”‚
          â”‚ â”œâ”€ _apply_   â”‚         â”‚              â”‚
          â”‚   secondary_ â”‚         â”‚              â”‚
          â”‚   effects()  â”‚         â”‚              â”‚
          â”‚ â””â”€ _apply_   â”‚         â”‚              â”‚
          â”‚   stat_      â”‚         â”‚              â”‚
          â”‚   change()   â”‚         â”‚              â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Fluxo de um Turno (5 Fases)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TURN EXECUTION                       â”‚
â”‚                  Turn.execute_turn()                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
         â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PHASE 1   â”‚  â”‚   PHASE 2     â”‚  â”‚ PHASE 3  â”‚
    â”‚   SWITCH    â”‚  â”‚ TRANSFORM     â”‚  â”‚  MOVES   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    Trocas de       Tera, Mega,        Ataques
    PokÃ©mon         Dynamax            BattleMove
                                       .execute()
    OrdenaÃ§Ã£o:      OrdenaÃ§Ã£o:         OrdenaÃ§Ã£o:
    Velocidade      Velocidade         Prioridade
    (maior)         (maior)            (maior)
                                       â””â”€ Velocidade
                                          (maior)
         â”‚                 â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PHASE 4   â”‚
                    â”‚  FAINTING   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Remove HP â‰¤ 0
                    
                    OrdenaÃ§Ã£o:
                    Velocidade
                    (maior)
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PHASE 5   â”‚
                    â”‚ END-OF-TURN â”‚
                    â”‚   EFFECTS   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    Weather/Terrain
                    Status damage
                    
                    OrdenaÃ§Ã£o:
                    Velocidade
                    (maior)
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   RESULT    â”‚
                    â”‚    (dict)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ExecuÃ§Ã£o de um Move (BattleMove.execute)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     BattleMove.execute(user, target, field)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
         â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ACCURACY   â”‚  â”‚   DAMAGE     â”‚  â”‚ EFFECTS  â”‚
    â”‚    CHECK     â”‚  â”‚ CALCULATION  â”‚  â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    Verificar hit:  Base Damage:      Stat Changes:
    â”œâ”€ Move acc     â”œâ”€ Base Formula    â”œâ”€ Apply to
    â”œâ”€ Evasion      â”œâ”€ STAB (1.5x)     â”‚  target
    â”‚  stage        â”œâ”€ Type Effect     â””â”€ Clamp to
    â”‚  diff         â”œâ”€ Crit hit        â”‚  -6 to +6
    â””â”€ RNG          â”œâ”€ Target mult
    (random)        â””â”€ All mods      Status Condition:
                                      â”œâ”€ Apply to
                                      â”‚  target
                                      â””â”€ Set condition
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚          â”‚
                    â–¼          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Damage   â”‚ â”‚ Drain/  â”‚
              â”‚ Applied  â”‚ â”‚ Healing â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              
              target.    user.heal(
              apply_     amount)
              damage()   
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚          â”‚
                    â–¼          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  CONSUME   â”‚ â”‚  RETURN  â”‚
            â”‚    PP      â”‚ â”‚ RESULT   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            
            consume_   {
            pp()         'success': True
                         'damage': 87
                         'effects_applied': [...]
                         'message': '...'
                       }
```

---

## OrdenaÃ§Ã£o de Moves (Phase 3)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Move Ordering: Priority â†’ Speed Tiebreaker   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input Actions: [action1, action2, action3]

Step 1: Extract only move actions (filter out switches)
â”œâ”€ action1: Thunderbolt (priority: 0, speed: 100)
â”œâ”€ action2: Quick Attack (priority: 1, speed: 80)
â””â”€ action3: Protect (priority: 4, speed: 50)

Step 2: Sort by (priority desc, speed desc)
â”œâ”€ 1st: Protect (priority 4)
â”œâ”€ 2nd: Quick Attack (priority 1)
â””â”€ 3rd: Thunderbolt (priority 0)

Example with tie in priority:
â”Œâ”€ Both priority 0
â”œâ”€ Charizard (speed 100) â”€â”€â–¶ EXECUTES FIRST
â””â”€ Blastoise (speed 80) â”€â”€â–¶ EXECUTES SECOND
```

---

## Estrutura de Dados

### Action
```python
Action(
    player: int,              # 0 ou 1
    user: BattlePokemon,      # PokÃ©mon que faz a aÃ§Ã£o
    battle_move: BattleMove,  # Move a executar (None se switch)
    switch: BattlePokemon,    # PokÃ©mon de troca (None se ataque)
    transformation: str,       # 'tera', 'mega', 'dynamax', etc
    action_type: str,         # 'attack', 'switch', 'transform'
    target: int               # Ãndice do slot alvo (0 ou 1)
)
```

### Turn Result
```python
result = {
    'turn_number': 1,
    'switches': [
        "Pikachu switches to Charizard!",
        ...
    ],
    'transformations': [
        "Pikachu terastallizes into Fire type!",
        ...
    ],
    'moves': [
        {
            'success': True,
            'damage': 87,
            'effects_applied': [
                "Charizard's SpDef was lowered!",
                ...
            ],
            'message': "Pikachu used Thunderbolt and dealt 87 damage!"
        },
        ...
    ],
    'fainting': [
        "Charizard fainted!",
        ...
    ],
    'end_of_turn_effects': [
        "Hail damage to Charizard!",
        ...
    ]
}
```

### BattleMove State
```
BattleMove(
    move: Move              # Dados estÃ¡ticos (imutÃ¡vel)
    â”œâ”€ name: str
    â”œâ”€ power: int
    â”œâ”€ accuracy: int
    â”œâ”€ type: str
    â”œâ”€ priority: int
    â”œâ”€ pp: int (mÃ¡ximo)
    â””â”€ ...
    
    pp_remaining: int       # Estado dinÃ¢mico (mutÃ¡vel)
    â””â”€ Consumido em cada execuÃ§Ã£o
)
```

---

## Fluxo de IntegraÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         GAME MAIN LOOP                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Get Actions    â”‚
    â”‚   from Players   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚         â”‚
    â”Œâ”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”
    â”‚                   â”‚
    â–¼                   â–¼
  Player 1          Player 2
  Escolhe           Escolhe
  BattleMove        BattleMove
    â”‚                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Create Actions  â”‚
    â”‚  with            â”‚
    â”‚  BattleMove      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Create Turn     â”‚
    â”‚  execute_turn()  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€ Phase 1 (switches)
             â”œâ”€ Phase 2 (transforms)
             â”œâ”€ Phase 3 (moves)
             â”‚  â””â”€ BattleMove.execute()
             â”œâ”€ Phase 4 (fainting)
             â””â”€ Phase 5 (end effects)
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Process Result   â”‚
    â”‚ (dict)           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    Check battle_over?
    â”‚         â”‚
    â”‚         â””â”€ NO â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    YES                   â”‚ (next turn)
    â”‚                     â”‚
    â–¼                     â”‚
  Winner         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mapeamento de Responsabilidades

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Move (entities/move.py)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dados estÃ¡ticos:                         â”‚
â”‚ â”œâ”€ name, power, accuracy, type           â”‚
â”‚ â”œâ”€ priority, pp, damage_class            â”‚
â”‚ â”œâ”€ stat_changes, ailment                 â”‚
â”‚ â””â”€ crit_rate, drain, healing             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BattleMove (battle_env/move.py)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dados dinÃ¢micos:                         â”‚
â”‚ â””â”€ pp_remaining                          â”‚
â”‚                                          â”‚
â”‚ LÃ³gica de execuÃ§Ã£o:                      â”‚
â”‚ â”œâ”€ execute()                             â”‚
â”‚ â”œâ”€ _check_move_accuracy()                â”‚
â”‚ â”œâ”€ _calculate_damage()                   â”‚
â”‚ â”œâ”€ _apply_secondary_effects()            â”‚
â”‚ â””â”€ consume_pp()                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BattlePokemon (battle_env/pokemon.py)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Gerencia BattleMove:                     â”‚
â”‚ â”œâ”€ battle_moves: list[BattleMove]        â”‚
â”‚ â”œâ”€ get_move(name) â†’ BattleMove           â”‚
â”‚ â”œâ”€ attack(target, battle_move, field)    â”‚
â”‚ â””â”€ apply_damage(), heal()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Turn (battle_env/turn.py)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5 Fases de turno:                        â”‚
â”‚ â”œâ”€ _execute_switch_phase()               â”‚
â”‚ â”œâ”€ _execute_transformation_phase()       â”‚
â”‚ â”œâ”€ _execute_move_phase()                 â”‚
â”‚ â”œâ”€ _execute_fainting_phase()             â”‚
â”‚ â””â”€ _execute_end_of_turn_phase()          â”‚
â”‚                                          â”‚
â”‚ Chama BattleMove.execute() em Phase 3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Battle (battle_env/battle.py)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Loop principal:                          â”‚
â”‚ â”œâ”€ chose_order_pokemon()                 â”‚
â”‚ â”œâ”€ is_battle_over()                      â”‚
â”‚ â””â”€ choose_action() (TODO: retornar       â”‚
â”‚                    Action com BattleMove)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Estado da ImplementaÃ§Ã£o

```
âœ… COMPLETO
â”œâ”€ BattleMove class
â”œâ”€ BattleMove.execute()
â”œâ”€ 5 Fases de turno
â”œâ”€ OrdenaÃ§Ã£o inteligente
â”œâ”€ CÃ¡lculo de dano
â”œâ”€ PP management
â”œâ”€ Type hints
â””â”€ DocumentaÃ§Ã£o

ğŸ”² TODO
â”œâ”€ _execute_status_move() (moves de status)
â”œâ”€ _execute_end_of_turn_phase() (efeitos finais)
â”œâ”€ Implementar trocas reais no Field
â”œâ”€ Implementar transformaÃ§Ãµes reais
â”œâ”€ Ability callbacks
â””â”€ Field setters (Stealth Rock, etc)
```

---

**Diagrama atualizado em 22 de janeiro de 2026**
